
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Как работают JOIN в реляционных СУБД - Lifetime blog</title>
  <meta name="author" content="Vadim Gribanov">

  
  <meta name="description" content="Вступление Все знают что в реляционных СУБД можно соединять таблицы в одну большую таблицу с помощью JOIN.
Потом эту таблицу можно использовать для &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="google-site-verification" content="4e66WmPVlZICQqbnIOA13sfYNRc7UDUoehIEe5uyda4" />
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yoihito.github.io/blog/2015/02/12/how-do-joins-is-implemented-in-rdbmses-and-in-postgresql-particularly/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Lifetime blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Lifetime blog</a></h1>
  
    <h2>this web log contains different interesting articles from Tech to Psy.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="yoihito.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Как работают JOIN в реляционных СУБД</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-12T16:18:55+03:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>4:18 pm</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://yoihito.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h2>Вступление</h2>

<p>Все знают что в реляционных СУБД можно соединять таблицы в одну большую таблицу с помощью JOIN.
Потом эту таблицу можно использовать для сложных запросов к базе. Все мы пользуемся этой операцией, но мало кто знает как она реализована.
Было решено развеять тайну над этим вопросом.</p>

<h2>Загадочная история JOIN-a Баттона</h2>

<p>Оказывается за командой join скрывается несколько различных методов. Каждый из них выбирается планировщиком на этап построения запроса.
Всего таких методов 3:</p>

<ul>
<li>Merge join</li>
<li>Hash join</li>
<li>Nested loop</li>
</ul>


<!--more-->


<h3>Merge join</h3>

<p>Сначала сортируются все записи по значениям колонок которые будут объединяться. Затем проходом по обеим таблицам совпадающие записи объединяются.
Метод хорошо тем, что проход по всем записями осуществляется один раз.
Вот такой пример с сайта <a href="http://use-the-index-luke.com.">http://use-the-index-luke.com.</a></p>

<p><img src="http://use-the-index-luke.com/img/sort-merge.asvg" alt="Merge join" /></p>

<h3>Hash join</h3>

<p>Первая таблица записывается в хэш-таблицу с ключем в виде атрибута по которому будут объединяться обе таблицы.
Затем проходом по второй таблице значения из неё сопостовляются со значениями из хэш-таблицы.</p>

<h3>Nested loop</h3>

<p>Каждому значению из первой таблицы, сопоставляется значение из второй таблицы. Если они равны то объединяются. Очень проста в реализации, но очень затратная метод.</p>

<h2>Заключение</h2>

<p>Таким образом мы выяснили каким образом реализован JOIN в реляционных СУБД.
Самый быстрый и оптимальный это Merge join
За ним следует Hash join, он хорош в случае когда одна из таблиц имеет мало записей.
И черепашка Nested loop, основанный на простом проходе циклами по таблицам и сравнении ключей.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Vadim Gribanov</span></span>

      




<time class='entry-date' datetime='2015-02-12T16:18:55+03:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>4:18 pm</span></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://yoihito.github.io/blog/2015/02/12/how-do-joins-is-implemented-in-rdbmses-and-in-postgresql-particularly/" data-via="_yoihito" data-counturl="http://yoihito.github.io/blog/2015/02/12/how-do-joins-is-implemented-in-rdbmses-and-in-postgresql-particularly/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/02/10/postgresql-architecture/" title="Previous Post: Postgresql: architecture">&laquo; Postgresql: architecture</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/03/16/how-to-build-assets-pipeline-with-webpack/" title="Next Post: How to manage frontend stuff on Node.js with webpack">How to manage frontend stuff on Node.js with webpack &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/03/16/how-to-build-assets-pipeline-with-webpack/">How to Manage Frontend Stuff on Node.js With Webpack</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/12/how-do-joins-is-implemented-in-rdbmses-and-in-postgresql-particularly/">Как работают JOIN в реляционных СУБД</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/10/postgresql-architecture/">Postgresql: Architecture</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/yoihito">@yoihito</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'yoihito',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Vadim Gribanov -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'yoihito';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://yoihito.github.io/blog/2015/02/12/how-do-joins-is-implemented-in-rdbmses-and-in-postgresql-particularly/';
        var disqus_url = 'http://yoihito.github.io/blog/2015/02/12/how-do-joins-is-implemented-in-rdbmses-and-in-postgresql-particularly/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61237521-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
